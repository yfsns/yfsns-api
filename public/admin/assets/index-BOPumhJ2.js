import{u as x,j as e}from"./index-CfjFDGFk.js";import{r as c,f,u as j}from"./react-vendor-CKx6dMfn.js";import{F as a,i as N,I as u,a as I,j as b,k as y,B as v,m as w,s as o}from"./antd-vendor-DaJANQRB.js";import"./redux-vendor-DakFfX2h.js";const B=()=>{var m,l;const[n,i]=c.useState(!1),[t]=a.useForm(),d=f(),g=((l=(m=j().state)==null?void 0:m.from)==null?void 0:l.pathname)||"/",{login:p}=x();c.useEffect(()=>{const s=localStorage.getItem("username");s&&t.setFieldsValue({username:s,remember:!0})},[t]);const h=async s=>{i(!0);try{const r=await p({username:s.username,password:s.password});r.success?(s.remember?localStorage.setItem("username",s.username):localStorage.removeItem("username"),o.success(r.message||"登录成功"),d(g,{replace:!0})):o.error(r.message||"用户名或密码错误")}catch{o.error("登录失败，请稍后重试")}finally{i(!1)}};return e.jsx("div",{className:"login-container",children:e.jsxs(N,{className:"login-card",variant:"borderless",children:[e.jsx("div",{className:"login-card-header",children:e.jsx("h1",{className:"login-title",style:{textAlign:"center",width:"100%"},children:"YFSNS"})}),e.jsxs(a,{form:t,name:"login",initialValues:{remember:!0},onFinish:h,layout:"vertical",size:"large",className:"login-form",children:[e.jsx(a.Item,{name:"username",rules:[{required:!0,message:"请输入用户名"},{min:3,message:"用户名至少3个字符"}],children:e.jsx(u,{prefix:e.jsx(I,{className:"input-icon"}),placeholder:"请输入用户名",autoComplete:"username",className:"login-input"})}),e.jsx(a.Item,{name:"password",rules:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少6个字符"}],children:e.jsx(u.Password,{prefix:e.jsx(b,{className:"input-icon"}),placeholder:"请输入密码",autoComplete:"current-password",className:"login-input"})}),e.jsx("div",{className:"login-options",children:e.jsx(a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(y,{className:"remember-checkbox",children:"记住用户名"})})}),e.jsx(a.Item,{style:{marginBottom:0},children:e.jsx(v,{type:"primary",htmlType:"submit",loading:n,block:!0,className:"login-button",icon:e.jsx(w,{}),children:n?"登录中...":"立即登录"})})]})]})})};export{B as default};
