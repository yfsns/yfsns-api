import{i as d,j as e}from"./index-C42INjwk.js";import{r as o}from"./react-vendor-CKx6dMfn.js";import{s as m}from"./index-CPCCNLS5.js";import{s as f,F as s,i as j,I as t,Y as c,B as g}from"./antd-vendor-DaJANQRB.js";import"./redux-vendor-DakFfX2h.js";const p={fetchDetail:async()=>(await d.get("/api/admin/website-config")).data,update:async a=>(await d.put("/api/admin/website-config",a)).data},y=a=>{const[i,n]=o.useState(!1),[h,x]=o.useState(null),l=async()=>{try{const r=await p.fetchDetail();x(r),a.setFieldsValue(r)}catch{m("获取网站配置失败")}},u=async r=>{n(!0);try{await p.update(r),f.success("网站设置保存成功"),await l()}catch{m("网站设置保存失败，请重试")}finally{n(!1)}};return o.useEffect(()=>{l()},[]),{loading:i,config:h,saveConfig:u,fetchSiteConfig:l}},R=()=>{const[a]=s.useForm(),{loading:i,saveConfig:n}=y(a);return e.jsx("div",{style:{padding:"12px"},children:e.jsx(j,{style:{marginBottom:"24px"},children:e.jsxs(s,{form:a,onFinish:n,layout:"vertical",style:{maxWidth:800},children:[e.jsx(s.Item,{name:"siteName",label:"站点名称",rules:[{required:!0,message:"请输入站点名称"}],children:e.jsx(t,{placeholder:"请输入站点名称"})}),e.jsx(s.Item,{name:"siteUrl",label:"站点URL",extra:'用于拼接本地存储文件的完整URL，例如：https://www.yfsns.cn（结尾不要加"/"，如果前后端分开部署的，这里请填写后端url）',children:e.jsx(t,{placeholder:"https://www.yfsns.cn",type:"url"})}),e.jsx(s.Item,{name:"siteTitle",label:"首页标题",children:e.jsx(t,{placeholder:"请输入首页标题"})}),e.jsx(s.Item,{name:"siteKeywords",label:"关键词",children:e.jsx(t,{placeholder:"请输入关键词，多个关键词用逗号分隔"})}),e.jsx(s.Item,{name:"siteDescription",label:"站点描述",children:e.jsx(t.TextArea,{rows:3,placeholder:"请输入站点描述"})}),e.jsx(s.Item,{name:"siteStatus",label:"站点状态",children:e.jsxs(c.Group,{children:[e.jsx(c,{value:!0,children:"开启"}),e.jsx(c,{value:!1,children:"关闭"})]})}),e.jsx(s.Item,{name:"icpNumber",label:"ICP备案号",children:e.jsx(t,{placeholder:"请输入ICP备案号"})}),e.jsx(s.Item,{name:"policeRecord",label:"公安备案号",children:e.jsx(t,{placeholder:"请输入公安备案号"})}),e.jsx(s.Item,{name:"statisticsCode",label:"统计代码",children:e.jsx(t.TextArea,{rows:4,placeholder:"请输入统计代码"})}),e.jsx(s.Item,{children:e.jsx(g,{type:"primary",htmlType:"submit",loading:i,size:"large",children:"保存设置"})})]})})})};export{R as default};
